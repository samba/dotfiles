" VIM runtime config
scriptencoding utf-8

" This line should not be removed as it ensures that various options are
" properly set to work with the Vim-related packages available in Debian.
runtime! debian.vim

" Pull in my minimal configuration...
source ~/.vim/vimrc-minimal



" Then extend it (with optional hostname overrides).
" This section fails silently, if no runtime directories are found.
" Skip this section of ENV{NOAUTO} is set (e.g. `NOAUTO=true vim ...`)
if len($NOAUTO) < 1
    let s:xtpattern = '*.vim'
    let s:autopath_base = '/.vim/runtime-' " base
    " I don't (currently) see any reason to extend this beyond -auto and -(hostname)
    let s:autopath = [ $HOME . s:autopath_base . 'auto', $HOME . s:autopath_base . hostname() ]

    for @d in s:autopath
        let s:my_includes = split(globpath(@d, s:xtpattern), '\n')
        for @x in s:my_includes
            " echo 'loading: '.@x
            exe 'source '.@x
        endfor
        let &runtimepath = printf("%s,%s", &runtimepath, @d)
    endfor
endif

" try to load the user's color scheme, and then one for the user-hostname combo
let s:colorschemes = [ $USER, $USER . "@" . hostname() ]
for @d in s:colorschemes 
    " echo 'Loading color scheme: ' .@d
    let s:schemefiles = split(globpath(&runtimepath, 'colors/'.@d.'.vim'), '\n')
    if len(s:schemefiles) > 0
        exe 'colorscheme '.@d
    endif
endfor



" modeline for .vimrc
" vim: foldmethod=indent foldcolumn=3 foldenable tw=120 shiftwidth=4 softtabstop=4 expandtab
